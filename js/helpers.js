function formatMeasureName(measure) {
  return measure
    .split('_')
    .map(word => word.charAt(0).toUpperCase() + word.slice(1))
    .join(' ');
}

// PuBu color scale from https://observablehq.com/@d3/color-schemes
const puBuColors = ["#fff7fb","#fef6fb","#fef6fa","#fdf5fa","#fdf5fa","#fcf4fa","#fbf4f9","#fbf3f9","#faf3f9","#faf2f8","#f9f2f8","#f8f1f8","#f8f1f8","#f7f0f7","#f7f0f7","#f6eff7","#f5eff6","#f5eef6","#f4eef6","#f3edf6","#f3edf5","#f2ecf5","#f1ecf5","#f1ebf4","#f0ebf4","#efeaf4","#efe9f3","#eee9f3","#ede8f3","#ede8f2","#ece7f2","#ebe7f2","#eae6f1","#eae5f1","#e9e5f1","#e8e4f0","#e7e3f0","#e7e3f0","#e6e2ef","#e5e2ef","#e4e1ef","#e3e0ee","#e3e0ee","#e2dfee","#e1deed","#e0deed","#dfdded","#dedcec","#dddcec","#dcdbec","#dcdaeb","#dbdaeb","#dad9ea","#d9d8ea","#d8d8ea","#d7d7e9","#d6d6e9","#d5d6e9","#d4d5e8","#d3d4e8","#d2d4e8","#d1d3e7","#d0d2e7","#ced2e6","#cdd1e6","#ccd1e6","#cbd0e5","#cacfe5","#c9cfe5","#c8cee4","#c7cde4","#c5cde4","#c4cce3","#c3cbe3","#c2cbe3","#c0cae2","#bfc9e2","#bec9e1","#bdc8e1","#bbc7e1","#bac7e0","#b9c6e0","#b8c6e0","#b6c5df","#b5c4df","#b4c4df","#b2c3de","#b1c2de","#afc2de","#aec1dd","#adc1dd","#abc0dc","#aabfdc","#a8bfdc","#a7bedb","#a6bddb","#a4bddb","#a3bcda","#a1bcda","#a0bbda","#9ebad9","#9dbad9","#9bb9d9","#9ab8d8","#98b8d8","#97b7d7","#95b6d7","#94b6d7","#92b5d6","#91b5d6","#8fb4d6","#8db3d5","#8cb3d5","#8ab2d4","#89b1d4","#87b1d4","#85b0d3","#84afd3","#82afd2","#81aed2","#7fadd2","#7dadd1","#7bacd1","#7aabd0","#78abd0","#76aad0","#75a9cf","#73a9cf","#71a8ce","#6fa7ce","#6ea6cd","#6ca6cd","#6aa5cd","#68a4cc","#66a3cc","#65a3cb","#63a2cb","#61a1ca","#5fa0ca","#5da0c9","#5b9fc9","#5a9ec9","#589dc8","#569dc8","#549cc7","#529bc7","#509ac6","#4e99c6","#4d99c5","#4b98c5","#4997c4","#4796c4","#4595c3","#4394c3","#4294c2","#4093c2","#3e92c1","#3c91c1","#3b90c1","#398fc0","#378ec0","#358dbf","#348cbf","#328cbe","#308bbe","#2f8abd","#2d89bd","#2b88bc","#2a87bc","#2886bb","#2785bb","#2584ba","#2483b9","#2282b9","#2181b8","#1f80b8","#1e7fb7","#1c7eb7","#1b7eb6","#1a7db5","#197cb5","#177bb4","#167ab4","#1579b3","#1478b2","#1377b1","#1276b1","#1175b0","#1074af","#0f74af","#0e73ae","#0d72ad","#0c71ac","#0c70ab","#0b6fab","#0a6faa","#0a6ea9","#096da8","#096ca7","#086ba6","#086ba5","#076aa4","#0769a3","#0768a2","#0667a1","#0667a0","#06669f","#06659e","#05649d","#05649c","#05639b","#056299","#056198","#056097","#046096","#045f95","#045e93","#045d92","#045c91","#045c90","#045b8e","#045a8d","#04598c","#04588a","#045789","#045687","#045586","#045585","#045483","#045382","#035280","#03517f","#03507d","#034f7c","#034e7a","#034d79","#034c77","#034b75","#034a74","#034972","#034871","#03476f","#03466d","#03456c","#03446a","#034369","#034267","#024165","#023f64","#023e62","#023d60","#023c5f","#023b5d","#023a5b","#02395a","#023858"];

// ColorScale for the Median Household Income
const divergingRdYlBuColors = ["#a50026","#a70226","#a90426","#ab0626","#ad0826","#af0926","#b10b26","#b30d26","#b50f26","#b61127","#b81327","#ba1527","#bc1727","#be1927","#c01b27","#c21d28","#c41f28","#c52128","#c72328","#c92529","#cb2729","#cc2929","#ce2b2a","#d02d2a","#d12f2b","#d3312b","#d4332c","#d6352c","#d7382d","#d93a2e","#da3c2e","#dc3e2f","#dd4030","#de4331","#e04532","#e14733","#e24a33","#e34c34","#e44e35","#e55136","#e75337","#e85538","#e95839","#ea5a3a","#eb5d3c","#ec5f3d","#ed613e","#ed643f","#ee6640","#ef6941","#f06b42","#f16e43","#f17044","#f27346","#f37547","#f37848","#f47a49","#f57d4a","#f57f4b","#f6824d","#f6844e","#f7864f","#f78950","#f88b51","#f88e53","#f89054","#f99355","#f99557","#f99858","#fa9a59","#fa9c5b","#fa9f5c","#fba15d","#fba35f","#fba660","#fba862","#fcaa63","#fcad65","#fcaf66","#fcb168","#fcb369","#fcb56b","#fdb86d","#fdba6e","#fdbc70","#fdbe72","#fdc073","#fdc275","#fdc477","#fdc678","#fdc87a","#fdca7c","#fecc7e","#fecd80","#fecf81","#fed183","#fed385","#fed587","#fed689","#fed88a","#feda8c","#fedb8e","#fedd90","#fede92","#fee094","#fee196","#fee397","#fee499","#fee69b","#fee79d","#fee89f","#feeaa1","#feeba3","#feeca4","#feeda6","#feeea8","#fef0aa","#fef1ac","#fdf2ae","#fdf2b0","#fdf3b2","#fdf4b4","#fcf5b6","#fcf6b8","#fbf6ba","#fbf7bc","#faf7be","#faf8c0","#f9f8c2","#f9f8c4","#f8f9c6","#f7f9c8","#f7f9ca","#f6f9cc","#f5f9ce","#f4f9d0","#f3f9d2","#f2f9d4","#f1f8d6","#f0f8d8","#eff8da","#edf8dc","#ecf7dd","#ebf7df","#eaf6e1","#e8f6e2","#e7f5e4","#e6f5e5","#e4f4e7","#e3f3e8","#e1f3e9","#e0f2ea","#def1eb","#dcf1ec","#dbf0ed","#d9efed","#d7eeee","#d5eeee","#d4edef","#d2ecef","#d0ebef","#ceeaef","#cce9ef","#cae8ef","#c8e7ef","#c6e6ef","#c5e5ef","#c3e4ee","#c0e3ee","#bee2ee","#bce1ed","#bae0ed","#b8deec","#b6ddeb","#b4dceb","#b2dbea","#b0d9e9","#aed8e9","#acd7e8","#aad5e7","#a7d4e6","#a5d2e6","#a3d1e5","#a1d0e4","#9fcee3","#9dcde2","#9bcbe1","#99c9e1","#96c8e0","#94c6df","#92c4de","#90c3dd","#8ec1dc","#8cbfdb","#8abeda","#88bcd9","#86bad8","#84b8d7","#82b6d6","#7fb5d5","#7db3d4","#7bb1d3","#79afd2","#77add1","#75abd0","#73a9cf","#71a7ce","#6fa5cd","#6da3cc","#6ca1cb","#6a9fca","#689dc9","#669bc8","#6499c7","#6297c5","#6094c4","#5f92c3","#5d90c2","#5b8ec1","#598cc0","#5889bf","#5687be","#5485bc","#5383bb","#5180ba","#507eb9","#4e7cb8","#4d7ab7","#4c77b5","#4a75b4","#4973b3","#4870b2","#466eb1","#456cb0","#4469ae","#4367ad","#4264ac","#4162ab","#4060aa","#3f5da8","#3e5ba7","#3d58a6","#3c56a5","#3b54a4","#3a51a2","#394fa1","#384ca0","#374a9f","#37479e","#36459c","#35429b","#34409a","#333d99","#333b97","#323896","#313695"];

// ColorScale for the Scatterplot
const scatterPlotColors = ["#ffffcc","#fffecb","#fffec9","#fffdc8","#fffdc6","#fffcc5","#fffcc4","#fffbc2","#fffac1","#fffac0","#fff9be","#fff9bd","#fff8bb","#fff8ba","#fff7b9","#fff6b7","#fff6b6","#fff5b5","#fff5b3","#fff4b2","#fff4b0","#fff3af","#fff2ae","#fff2ac","#fff1ab","#fff1aa","#fff0a8","#fff0a7","#ffefa6","#ffeea4","#ffeea3","#ffeda2","#ffeda0","#ffec9f","#ffeb9d","#ffeb9c","#ffea9b","#ffea99","#ffe998","#ffe897","#ffe895","#ffe794","#ffe693","#ffe691","#ffe590","#ffe48f","#ffe48d","#ffe38c","#fee28b","#fee289","#fee188","#fee087","#fee085","#fedf84","#fede83","#fedd82","#fedc80","#fedc7f","#fedb7e","#feda7c","#fed97b","#fed87a","#fed778","#fed777","#fed676","#fed574","#fed473","#fed372","#fed270","#fed16f","#fed06e","#fecf6c","#fece6b","#fecd6a","#fecb69","#feca67","#fec966","#fec865","#fec764","#fec662","#fec561","#fec460","#fec25f","#fec15e","#fec05c","#febf5b","#febe5a","#febd59","#febb58","#feba57","#feb956","#feb855","#feb754","#feb553","#feb452","#feb351","#feb250","#feb14f","#feb04e","#feae4d","#fead4d","#feac4c","#feab4b","#feaa4a","#fea84a","#fea749","#fea648","#fea547","#fea347","#fea246","#fea145","#fda045","#fd9e44","#fd9d44","#fd9c43","#fd9b42","#fd9942","#fd9841","#fd9741","#fd9540","#fd9440","#fd923f","#fd913f","#fd8f3e","#fd8e3e","#fd8d3d","#fd8b3c","#fd893c","#fd883b","#fd863b","#fd853a","#fd833a","#fd8139","#fd8039","#fd7e38","#fd7c38","#fd7b37","#fd7937","#fd7736","#fc7535","#fc7335","#fc7234","#fc7034","#fc6e33","#fc6c33","#fc6a32","#fc6832","#fb6731","#fb6531","#fb6330","#fb6130","#fb5f2f","#fa5d2e","#fa5c2e","#fa5a2d","#fa582d","#f9562c","#f9542c","#f9522b","#f8512b","#f84f2a","#f74d2a","#f74b29","#f64929","#f64828","#f54628","#f54427","#f44227","#f44127","#f33f26","#f23d26","#f23c25","#f13a25","#f03824","#f03724","#ef3524","#ee3423","#ed3223","#ed3123","#ec2f22","#eb2e22","#ea2c22","#e92b22","#e92921","#e82821","#e72621","#e62521","#e52420","#e42220","#e32120","#e22020","#e11f20","#e01d20","#df1c20","#de1b20","#dd1a20","#dc1920","#db1820","#da1720","#d91620","#d81520","#d71420","#d51320","#d41221","#d31121","#d21021","#d10f21","#cf0e21","#ce0d21","#cd0d22","#cc0c22","#ca0b22","#c90a22","#c80a22","#c60923","#c50823","#c40823","#c20723","#c10723","#bf0624","#be0624","#bc0524","#bb0524","#b90424","#b80424","#b60425","#b50325","#b30325","#b10325","#b00225","#ae0225","#ac0225","#ab0225","#a90125","#a70126","#a50126","#a40126","#a20126","#a00126","#9e0126","#9c0026","#9a0026","#990026","#970026","#950026","#930026","#910026","#8f0026","#8d0026","#8b0026","#8a0026","#880026","#860026","#840026","#820026","#800026"];